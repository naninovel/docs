# Фоновая музыка

Вы можете добавлять, редактировать и удалять ресурсы фоновой музыки (BGM) с помощью аудиоменеджера, доступного через `Naninovel -> Resources -> Audio`, или просто хранить аудиоклипы в папке `Resources/Audio`.

![Управление ресурсами BGM](https://i.gyazo.com/cacdec36623dbbfcf9f49c594de53c0f.png)

Вы можете использовать любые аудиоформаты, [поддерживаемые Unity](https://docs.unity3d.com/Manual/AudioFiles.html).

Поведение воспроизведения фоновой музыки можно настроить с помощью контекстного меню `Naninovel -> Configuration -> Audio`; доступные параметры см. в разделе [Руководство по конфигурации](/ru/guide/configuration.md#аудио).

Используйте команду [`@bgm`](/ru/api/#bgm), за которой следует название трека, чтобы управлять воспроизведением музыки в сценариях Naninovel:

```nani
; Начать проигрывать зацикленный трек с названием `Sanctuary` 
@bgm Sanctuary

; То же самое, что выше, но в начале используется фейд в 10 секунд, и трек проигрывается только один раз
@bgm Sanctuary fade:10 loop:false

; Изменить громкость всех воспроизводимых музыкальных треков до 50% за 2,5 секунды и зациклить их
@bgm volume:0.5 loop:true time:2.5
```

Музыкальные треки по умолчанию зациклены. Если название трека не указано в команде `@bgm`, то командой будут затронуты все проигрываемые в данный момент треки. При вызове трека, который уже воспроизводится, воспроизведение не будет затронуто (трек не начнет воспроизводиться с самого начала), но будут применены указанные параметры (громкость, зацикливание).

Можно воспроизвести вступление трека, за которым следует зацикленная часть, используя параметр `intro`, например:

```nani
; Проиграть `BattleThemeIntro` один раз, а затем сразу же зацикленный `BattleThemeMain`.
@bgm BattleThemeMain intro:BattleThemeIntro
```

Чтобы остановить воспроизведение музыки, используйте команду [`@stopBgm`](/ru/api/#stopbgm), за которой следует название трека. Если название трека не указано, команда остановит все воспроизводимые в данный момент треки.

```nani
; Затухание трека `Promenade` в течение 10 секунд и остановка воспроизведения
@stopBgm Promenade fade:10

; Остановить все играющие в данный момент музыкальные треки
@stopBgm
```